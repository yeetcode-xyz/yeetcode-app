echo "ğŸ” Running pre-commit checks..."

# Check if code is formatted with Prettier
echo "ğŸ“ Checking code formatting with Prettier..."
npm run format:check

# If format check fails, auto-format the code and continue
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Some files are not properly formatted!"
  echo "ğŸ”§ Running 'npm run format' to auto-format all files..."
  npm run format
  
  if [ $? -ne 0 ]; then
    echo ""
    echo "âŒ Auto-formatting failed. Please check your code and try again."
    echo "ğŸ’¡ You may need to fix formatting issues manually."
    exit 1
  else
    echo ""
    echo "âœ… Files have been auto-formatted with Prettier."
    echo "ğŸ“‹ Auto-staging formatted files..."
    git add .
    echo "ğŸš€ Commit proceeding with formatted code..."
  fi
fi

echo ""
echo "âœ… All pre-commit checks passed!"

