echo "ğŸ” Running pre-commit checks..."

# Check if code is formatted with Prettier
echo "ğŸ“ Checking code formatting with Prettier..."
npm run format:check

# If format check fails, auto-format the code and block commit
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Some files are not properly formatted!"
  echo "ğŸ”§ Running 'npm run format' to auto-format all files..."
  
  npm run format
  
  if [ $? -ne 0 ]; then
    echo ""
    echo "âŒ Auto-formatting failed. Please check your code and try again."
    echo "ğŸ’¡ You may need to fix formatting issues manually."
    exit 1
  else
    echo ""
    echo "âœ… Files have been auto-formatted with Prettier."
    echo "ğŸ“‹ Files that were formatted:"
    echo "   - All JavaScript/TypeScript/CSS/JSON files have been updated"
    echo ""
    echo "ğŸš« COMMIT BLOCKED: Please review the formatted changes and re-commit."
    echo "ğŸ’¡ Next steps:"
    echo "   1. Review the formatting changes in your files"
    echo "   2. Stage the formatted files: git add ."
    echo "   3. Commit again: git commit"
    exit 1
  fi
fi

echo ""
echo "âœ… All files are properly formatted!"
echo "âœ… All pre-commit checks passed!"

